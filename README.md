## Проект по развертыванию сервисов для сбора заявок

сборка состоит из следующих микросервисов:
- два сайта
- два телеграмм бота
- обработчик заявок, отправляющий данные в гугл таблицу
- reverse proxy для объеденения сервисов и подключения доменов

### Environments
Переменные для контейнеров:
- SITE1_DOMAIN и SITE2_DOMAIN
- BOT1_TOKEN и BOT2_TOKEN
- GOOGLE_POST_URL
- LETSENCRYPT_EMAIL

Для подключения к вирутальной машине:
- SSH_USERNAME
- SSH_HOST
- SERVER_SSH_KEY

## Deploy workflow (push main)
Разворчивание проекта состоит из следующих этапов:

1) Перенос ключей и файлов проекта в /home/app
2) Запуск скрипта setup.sh (при отсутвии установит требуемыые завсимости в систему)
3) Запуск docker compose

## Про reverse-proxy контейнер

Для него настроен volume на /etc/letsencrypt (SSL сертфикаты)

Контейнер при запуске выполняет дополнительные скрипты для проверки существования/срока сертификатов для их генерации/обновления, а так же добавляет задачу перепроверки, запускаемую каждые 12 часов.
